{"version":3,"sources":["serviceWorker.js","components/PlayingCard.js","components/RenderCards.js","components/Button.js","components/Player.js","components/Table.js","components/RenderPlayers.js","components/App.js","components/Input.js","components/Welcome.js","index.js"],"names":["Boolean","window","location","hostname","match","PlayingCard","props","renderSuit","suit","className","width","height","viewBox","fill","xmlns","d","stockClassesUngrabbed","showUngrabbed","cardColour","text","sizeBg","sizeSm","spacings","baseCard","cardDefaultClasses","cardBackClasses","cardClasses","value","otherPlayerClasses","stockClasses","cardDiscardClasses","cardDiscardBackClasses","type","classes","showCardValue","style","boxShadow","marginLeft","letterSpacing","marginTop","position","bottom","right","thisClasses","onClick","e","RenderCards","handleStockCardClick","bind","handleCardDragStart","handleCardDragEnd","this","cardLocation","dispatch","isSource","from","room","currentPlayer","user","username","currentPlayerHasGrabbedCard","cards","map","card","key","id","cardsLength","length","currentRoundEnded","i","showCardsLength","display","maxWidth","flexWrap","orientation","groupName","dragBeginDelay","onDragStart","onDragEnd","onDrop","handleCardDrop","index","Component","connect","state","cardMovement","Button","attributes","disabled","disabledClasses","styles","children","Player","isCurrentPlayer","userIndex","players","findIndex","player","name","userHand","hand","handleCardClick","sendToServer","action","content","Table","table","group","renderTableGroups","userIsDragging","animationDuration","behaviour","endpoint","gameId","connectedUsers","isTableActive","RenderPlayers","playerUsername","isPlayerOnline","isOnline","onlineClasses","offlineClasses","showAllCards","userTotalPoints","thisValue","Number","parseInt","App","isThisUserTurn","handleStartGameButton","handleTableUpdate","handlePauseButton","renderHeader","renderDiscardPile","renderStock","renderMain","renderPlayer","renderPauseButton","renderBuyRequest","handleIWantItBeforeButton","cooldown","startCooldown","cooldownCountDown","socket","emit","cardType","console","log","removedIndex","addedIndex","fromPosition","to","toPosition","playerIndex","playerHand","newTable","splice","groupId","newDiscard","discard","push","newGroup","gameHasStarted","handleNewRoundButton","hasHiddenCards","hiddenCardsWereBought","willAcceptDrop","left","minWidth","minHeight","disableStyles","turnCooldown","stock","playerWantsToBuy","prevPlayer","transform","cooldownTime","setInterval","newCooldownTime","clearInterval","isPrevPlayerThisPlayer","hasCurrentPlayerGrabbedCard","isBuyingDisabled","thisUserPaused","playerPausedGame","userHasPriority","thisUserPriorityIndex","playersByPriority","currentPlayerPriorityIndex","playerPausedPriorityIndex","handleBuying","cancelPause","handleAlsoWants","isPauseButtonDisabled","isGamePaused","renderPausePopup","remainingTime","gamePath","pathname","split","localStorage","setItem","getItem","history","io","query","on","userInfo","shouldStartCooldown","rounds","currentTurn","withRouter","Input","placeholder","onChange","Welcome","setState","textAlign","document","getElementById","handleUsernameInputChange","handleGameIdInputChange","preventDefault","handleGoButton","initialState","deck","totalRounds","currentRound","direction","startingPlayer","savedCard","fromGroup","toGroup","minusOne","timer","store","createStore","newState","__REDUX_DEVTOOLS_EXTENSION__","Root","path","ReactDOM","render","navigator","serviceWorker","ready","then","registration","unregister","catch","error","message"],"mappings":"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","file":"static/js/main.867992e5.chunk.js","sourcesContent":["// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' },\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import React from \"react\"\r\n\r\nfunction PlayingCard(props) {\r\n  // render suit icon\r\n  const renderSuit = () => {\r\n    switch(props.suit) {\r\n      case 'diamonds':\r\n        return (\r\n          <svg className=\"fill-current text-red-600\" width=\"100%\" height=\"100%\" viewBox=\"0 0 100 100\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n            <path d=\"M52.8046 1.38349C64.8036 16.9009 83.0996 35.1968 98.6169 47.1961C100.461 48.6221 100.461 51.3779 98.6169 52.8039C83.0996 64.8032 64.8036 83.0987 52.8046 98.6165C51.3784 100.461 48.6212 100.461 47.1954 98.6165C35.1964 83.0991 16.9004 64.8032 1.38308 52.8039C-0.461027 51.3779 -0.461027 48.6221 1.38308 47.1961C16.9 35.1968 35.1959 16.9009 47.195 1.38349C48.6212 -0.461163 51.3779 -0.461163 52.8046 1.38349Z\"/>\r\n          </svg>\r\n        )\r\n      case 'spades':\r\n        return (\r\n          <svg className=\"fill-current text-gray-900\" width=\"100%\" height=\"100%\" viewBox=\"0 0 100 100\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n            <path d=\"M52.3122 0.513139C51.1919 -0.171046 49.8073 -0.171046 48.6874 0.513139C40.1088 5.75236 4 29.4189 4 56.5892C4 70.7107 15.417 82.1582 29.5001 82.1582C34.1099 82.1582 38.4299 80.9286 42.1583 78.7814C43.2272 78.1655 44.4773 79.2539 44.0578 80.4236C42.0685 85.9708 39.252 91.1169 35.7544 95.7059C34.4187 97.4587 35.7015 100 37.8896 100H63.3804C65.5693 100 66.8493 97.4575 65.5127 95.7039C62.0548 91.1667 59.2633 86.0857 57.2785 80.6106C56.8569 79.4477 58.0892 78.3573 59.1618 78.9553C62.8162 80.9933 67.0202 82.1582 71.4999 82.1582C85.5834 82.1582 97 70.7107 97 56.5892C97 29.4189 60.8912 5.75236 52.3122 0.513139Z\"/>\r\n          </svg>\r\n\r\n        )\r\n      case 'clubs':\r\n        return (\r\n          <svg className=\"fill-current text-gray-900\" width=\"100%\" height=\"100%\" viewBox=\"0 0 100 100\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n            <path d=\"M80.2678 40.3586C71.5984 39.8611 64.0103 44.6427 60.3705 51.7781C59.5671 53.3537 58.2275 54.5913 56.5486 55.1464C56.5277 55.1532 56.5069 55.1604 56.486 55.1668C55.0586 55.6372 53.632 54.4204 53.8559 52.9336C54.3476 49.6682 55.1198 46.4948 56.1439 43.4355C56.6999 41.7747 57.9158 40.4411 59.4778 39.6485C66.6332 36.0165 71.4312 28.4176 70.9332 19.7338C70.3241 9.11776 61.4925 0.445757 50.8682 0.0175263C38.8931 -0.465536 29.0332 9.09963 29.0332 20.9673C29.0332 29.1426 33.7212 36.2068 40.5494 39.6612C42.0973 40.4443 43.2987 41.7684 43.8502 43.4133C44.8775 46.4794 45.6528 49.6605 46.1459 52.9336C46.3693 54.42 44.9432 55.6372 43.5157 55.1668C43.4944 55.16 43.4727 55.1527 43.4514 55.1455C41.7738 54.5904 40.4352 53.3537 39.6322 51.7795C35.9933 44.6432 28.4047 39.8606 19.734 40.3582C9.11783 40.9672 0.445729 49.7987 0.0174943 60.4229C-0.46512 72.398 9.10016 82.2577 20.9675 82.2577C29.1166 82.2577 36.161 77.6002 39.6276 70.8087C40.4343 69.2286 41.7792 67.9879 43.4632 67.4309C43.4827 67.4246 43.5021 67.4178 43.5216 67.4115C44.95 66.9411 46.3724 68.1592 46.1518 69.6464C44.6713 79.6072 40.5883 88.7169 34.6166 96.2669C33.4221 97.7773 34.5282 100 36.4542 100H63.5458C65.4717 100 66.5779 97.7773 65.3834 96.2669C59.4116 88.7169 55.3287 79.6072 53.8482 69.6464C53.6271 68.1587 55.0495 66.9411 56.4783 67.4115C56.4978 67.4178 56.5173 67.4246 56.5368 67.4309C58.2212 67.9879 59.5657 69.229 60.3723 70.8087C63.839 77.6006 70.8833 82.2577 79.0325 82.2577C90.9007 82.2577 100.466 72.3975 99.9825 60.4229C99.556 49.7992 90.8839 40.9677 80.2678 40.3586Z\"/>\r\n          </svg>\r\n        )\r\n      case 'hearts':\r\n        return (\r\n          <svg className=\"fill-current text-red-600\" width=\"100%\" height=\"100%\" viewBox=\"0 0 100 100\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n            <path d=\"M0 32.6846C0 17.3947 12.2762 5 27.4195 5C34.9253 5 41.7209 8.04914 46.6695 12.9844C48.5048 14.814 51.4956 14.814 53.3305 12.9844C58.2795 8.04958 65.0751 5 72.5805 5C87.7238 5 100 17.3947 100 32.6846C100 61.2773 63.3226 87.2888 52.7941 94.1661C51.0922 95.278 48.9074 95.278 47.2055 94.1661C36.6778 87.2888 0 61.2777 0 32.6846Z\"/>\r\n          </svg>    \r\n\r\n        )\r\n      default:\r\n        return null\r\n    }\r\n  }\r\n\r\n  let stockClassesUngrabbed = ''\r\n  if (!!props.showUngrabbed) {\r\n    stockClassesUngrabbed = props.showUngrabbed() ? 'inset 0px 0px 0px 3px #e53e3e' : 'inset 0px 0px 0px 3px #cbd5e0'\r\n  }\r\n\r\n  // render red color on hearts and diamons\r\n  const isRedSuit = () => props.suit === 'hearts' || props.suit === 'diamonds'\r\n  const cardColour = isRedSuit() ? 'text-red-600' : 'text-black'\r\n\r\n  // card is facing back\r\n  const isCardHidden = () => !props.value || !props.suit\r\n\r\n  const text = 'text-xl tracking-tighter'\r\n  const sizeBg = 'w-12 md:w-16 h-16 md:h-20'\r\n  const sizeSm = 'w-12 h-16'\r\n  const spacings = 'px-2 py-1 mx-2 my-2'\r\n\r\n  // const baseCard = `relative overflow-hidden select-none cursor-default inline-flex flex-col flex-shrink-0 items-center justify-start leading-none rounded border-2 border-solid ${cardBorderColour} ${cardColour}`\r\n  const baseCard = `relative overflow-hidden select-none cursor-default inline-flex flex-col flex-shrink-0 items-center justify-start leading-none rounded ${cardColour}`\r\n\r\n  // TODO: style jungle\r\n  const cardDefaultClasses = `${baseCard} ${sizeBg} ${spacings} ${text} bg-white`\r\n\r\n  const cardBackClasses = `${baseCard} ${sizeBg} ${spacings} ${text} bg-gray-300`\r\n\r\n  const cardClasses = isCardHidden() ? cardBackClasses : cardDefaultClasses\r\n\r\n  const otherPlayerClasses = `${baseCard} ${sizeSm} ${spacings} ${text} justify-center bg-gray-300`\r\n\r\n  const stockClasses = `${baseCard} ${sizeSm} ${stockClassesUngrabbed} px-2 py-1 mx-2 justify-center bg-gray-300 text-gray-700 text-l tracking-tight`\r\n\r\n  const cardDiscardClasses = `${baseCard} ${sizeSm} ${spacings} ${text} bg-white`\r\n  const cardDiscardBackClasses = `${cardDiscardClasses} bg-gray-300`\r\n\r\n  const renderCard = () => {\r\n    if (props.type === 'other players') {\r\n      const classes = props.showCardValue ? `${baseCard} ${sizeSm} ${spacings} ${text} bg-white` : otherPlayerClasses\r\n      return (\r\n        <div\r\n          className={classes}\r\n          style={{\r\n            boxShadow: 'inset 0px 0px 0px 3px #cbd5e0'\r\n          }}\r\n        >\r\n          {props.showCardValue &&\r\n            <span\r\n              className=\"text-l font-bold\"\r\n              style={{\r\n                marginLeft: '-80%',\r\n                letterSpacing: '-0.1em'\r\n              }}>{props.value}</span>\r\n          }\r\n          {props.showCardValue &&\r\n            <span style={{\r\n              width: '1rem',\r\n              height: '1rem',\r\n              marginLeft: '-77%',\r\n              marginTop: '.1rem'\r\n            }}>{renderSuit()}</span>\r\n          }\r\n          {props.showCardValue &&\r\n            <span style={{\r\n              position: 'absolute',\r\n              width: '100%',\r\n              height: '100%',\r\n              bottom: '-35%',\r\n              right: '-45%'\r\n            }}>{renderSuit()}</span>\r\n          }\r\n          {!props.showCardValue &&\r\n            <span className=\"inline-flex font-bold\">{props.value}</span>\r\n          }\r\n        </div>\r\n      ) \r\n    } else if (props.type === 'discard') {\r\n      // TODO: move this logic\r\n      let thisClasses = ''\r\n      if (!props.value || !props.suit) {\r\n        thisClasses = `${cardDiscardBackClasses}`\r\n      } else {\r\n        thisClasses = `${cardDiscardClasses}`\r\n      }\r\n      return (\r\n        <div\r\n          className={thisClasses}\r\n          style={{\r\n            boxShadow: 'inset 0px 0px 0px 3px #cbd5e0'\r\n          }}\r\n        >\r\n          <span className=\"font-bold\" style={{\r\n            marginLeft: '-1.45rem',\r\n          }}>{props.value}</span>\r\n            <span style={{\r\n              width: '1rem',\r\n              height: '1rem',\r\n              marginLeft: '-1.4rem',\r\n              marginTop: '.1rem'\r\n            }}>{renderSuit()}</span>\r\n            <span style={{\r\n              position: 'absolute',\r\n              width: '100%',\r\n              height: '100%',\r\n              bottom: '-35%',\r\n              right: '-45%'\r\n            }}>{renderSuit()}</span>\r\n        </div>\r\n      ) \r\n    } else if (props.type === 'stock') {\r\n      return (\r\n        <div\r\n          className={stockClasses}\r\n          style={{\r\n            boxShadow: stockClassesUngrabbed\r\n          }}\r\n          onClick={(e) => props.onClick(props)}\r\n        >\r\n          <span className=\"inline-flex font-bold\">{props.value}</span>\r\n        </div>\r\n      ) \r\n    } else {\r\n      return (\r\n        <div className=\"inline-block\">\r\n          <div\r\n            className={cardClasses}\r\n            style={{\r\n              boxShadow: 'inset 0px 0px 0px 3px #cbd5e0'\r\n            }}\r\n          >\r\n            <span\r\n              className=\"font-bold\"\r\n              style={{\r\n                marginLeft: '-80%',\r\n                letterSpacing: '-0.1em'\r\n              }}>{props.value}</span>\r\n            <span style={{\r\n              width: '1rem',\r\n              height: '1rem',\r\n              marginLeft: '-77%',\r\n              marginTop: '.1rem'\r\n            }}>{renderSuit()}</span>\r\n            <span style={{\r\n              position: 'absolute',\r\n              width: '100%',\r\n              height: '100%',\r\n              bottom: '-35%',\r\n              right: '-35%'\r\n            }}>{renderSuit()}</span>\r\n          </div>\r\n        </div>\r\n      ) \r\n    }\r\n  }\r\n\r\n  return (\r\n    // TODO: dis stoopid\r\n    renderCard()\r\n  )\r\n}\r\n\r\nexport default PlayingCard\r\n","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { Container, Draggable } from 'react-smooth-dnd'\r\nimport PlayingCard from './PlayingCard'\r\n\r\nclass RenderCards extends Component {\r\n  constructor() {\r\n    super()\r\n\r\n    this.handleStockCardClick = this.handleStockCardClick.bind(this)\r\n\r\n    this.handleCardDragStart = this.handleCardDragStart.bind(this)\r\n    this.handleCardDragEnd = this.handleCardDragEnd.bind(this)\r\n    this.showUngrabbed = this.showUngrabbed.bind(this)\r\n  }\r\n\r\n  // Pass stock click to parent\r\n  handleStockCardClick(e) {\r\n    this.props.onClick('stock', e)\r\n  }\r\n\r\n  // ------------------- \r\n  // player card actions\r\n  // ------------------- \r\n\r\n  // player hand -- drag start\r\n  handleCardDragStart(cardLocation, e) {\r\n    this.props.dispatch({ type: 'USER_IS_DRAGGING' })\r\n\r\n    if ( !e.isSource ) { return false }\r\n\r\n    this.props.dispatch({\r\n      type: 'MOVEMENT_INFO',\r\n      from: cardLocation\r\n    })\r\n  }\r\n\r\n  // player hand -- drag end\r\n  handleCardDragEnd() {\r\n    this.props.dispatch({ type: 'USER_IS_NOT_DRAGGING' })\r\n  }\r\n\r\n  showUngrabbed() {\r\n    if (this.props.room.currentPlayer === this.props.user.username) {\r\n      if (this.props.room.currentPlayerHasGrabbedCard) {\r\n        return false\r\n      } else {\r\n        return true\r\n      }\r\n    } else {\r\n      return false\r\n    }\r\n  }\r\n\r\n  render() {\r\n    switch(this.props.location) {\r\n      case 'discard':\r\n        if (!!this.props.cards) {\r\n          return this.props.cards.map(card => <PlayingCard\r\n            key={card.id}\r\n            id={card.id}\r\n            value={card.value}\r\n            suit={card.suit}\r\n            type={this.props.location}\r\n          />)\r\n        }\r\n        break\r\n      case 'stock':\r\n        return <PlayingCard\r\n            value={this.props.cards}\r\n            type={this.props.location}\r\n            showUngrabbed={this.showUngrabbed}\r\n            onClick={(e) => this.handleStockCardClick(e)}\r\n          />\r\n      case 'other players':\r\n        const cardsLength = this.props.cards.length\r\n        const showCardValue = this.props.room.currentRoundEnded\r\n\r\n        return this.props.cards.map((card, i) => {\r\n          let showCardsLength = showCardValue ? card.value : 0\r\n          if (showCardsLength === 0 && this.props.cards.length === i + 1) {\r\n            showCardsLength = (this.props.cards.length === i + 1) ? cardsLength : null\r\n          }\r\n          return (\r\n            <PlayingCard\r\n              key={card.id}\r\n              id={card.id}\r\n              value={showCardsLength}\r\n              suit={card.suit}\r\n              type={this.props.location}\r\n              showCardValue={showCardValue}\r\n            />)\r\n          })\r\n      case 'table':\r\n        if (!!this.props.cards) {\r\n          // const numberOfCards = this.props.cards.length\r\n          // const maxWidth = 100/numberOfCards + '%'\r\n          return (\r\n            <div className=\"border-2 border-dashed border-gray-400 rounded-lg mx-4 p-1 z-10 tableGroupSm md:tableGroupMd\">\r\n              <Container\r\n                style={{\r\n                  display: 'flex',\r\n                  maxWidth: '100vw',\r\n                  flexWrap: 'wrap'\r\n                }}\r\n                orientation='horizontal'\r\n                groupName='droppable'\r\n                dragBeginDelay={0}\r\n                onDragStart={(e) => {this.handleCardDragStart(this.props.id, e)}}\r\n                onDragEnd={(e) => {this.handleCardDragEnd(this.props.id, e)}}\r\n                onDrop={(e) => {this.props.handleCardDrop(this.props.id, e)}}\r\n              >\r\n                {this.props.cards.map((card, index) => (\r\n                  <Draggable\r\n                    key={index}\r\n                    className=\"inline-flex w-8\"\r\n                    // style={{width: '1.5rem'}}\r\n                  >\r\n                    <PlayingCard\r\n                      key={card.id}\r\n                      id={card.id}\r\n                      value={card.value}\r\n                      suit={card.suit}\r\n                    />\r\n                  </Draggable>)\r\n                )}\r\n              </Container>\r\n            </div>\r\n          )\r\n        }\r\n        break\r\n      default:\r\n        if (!!this.props.cards) {\r\n          const numberOfCards = this.props.cards.length\r\n          const maxWidth = 100/numberOfCards + '%'\r\n\r\n          return (\r\n            <Container style={{\r\n                display: 'flex',\r\n                maxWidth: '100vw',\r\n                flexWrap: 'wrap'\r\n              }}\r\n              orientation='horizontal'\r\n              groupName='droppable'\r\n              dragBeginDelay={0}\r\n              onDragStart={(e) => {this.handleCardDragStart('player', e)}}\r\n              onDragEnd={(e) => {this.handleCardDragEnd('player')}}\r\n              onDrop={(e) => {this.props.handleCardDrop('player', e)}}\r\n            >\r\n              {this.props.cards.map((card, index) => (\r\n                <Draggable key={index} className=\"inline-flex\" style={{maxWidth: maxWidth}}>\r\n                  <PlayingCard\r\n                    key={card.id}\r\n                    id={card.id}\r\n                    value={card.value}\r\n                    suit={card.suit}\r\n                  />\r\n                </Draggable>)\r\n              )}\r\n            </Container>\r\n          )\r\n        }\r\n      break\r\n    }\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    user: state.user,\r\n    room: state.room,\r\n    cardMovement: state.cardMovement\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps)(RenderCards)\r\n","import React, { Component } from 'react'\r\n\r\n// Making the App component\r\nclass Button extends Component {\r\n  render() {\r\n    var attributes = {}\r\n    attributes['disabled'] = this.props.disabled ? 'disabled' : null\r\n\r\n    const disabledClasses = this.props.disabled ? 'opacity-50 cursor-not-allowed' : ''\r\n    const classes = `border border-solid border-red-600 hover:border-red-800 bg-red-600 hover:bg-red-800 text-white rounded-full py-1 px-8 ${disabledClasses}`\r\n    const styles = this.props.classes ? classes + ' ' + this.props.classes : classes\r\n\r\n    return (\r\n      <button\r\n        {...attributes}\r\n        className={styles}\r\n        onClick={this.props.onClick}\r\n      >\r\n        {this.props.children}\r\n      </button>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Button\r\n","import React from \"react\"\r\nimport Button from './Button'\r\nimport RenderCards from './RenderCards'\r\n\r\nfunction Player(props) {\r\n  const isCurrentPlayer = props.currentPlayer === props.user.username\r\n\r\n  const userIndex = props.room.players.findIndex(player => player.name === props.user.username)\r\n  const userHand = props.room.players[userIndex].hand\r\n\r\n  return (\r\n    <div className=\"relative inline-flex flex-col items-start p-2\">\r\n      <div className=\"mx-2\">\r\n        {isCurrentPlayer &&\r\n          <strong>\r\n            {props.user.username}\r\n          </strong>\r\n        }\r\n        {!isCurrentPlayer && props.user.username}\r\n      </div>\r\n      <div>\r\n        <RenderCards\r\n          cards={userHand}\r\n          location='user'\r\n          handleCardDrop={(location, e) => props.handleCardDrop(location, e)}\r\n          onClick={props.handleCardClick}\r\n          sendToServer={(action, content) => props.sendToServer(action, content)}\r\n        />\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Player\r\n","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { Container } from 'react-smooth-dnd'\r\n\r\nimport RenderCards from './RenderCards'\r\n\r\nclass Table extends Component {\r\n  // ------------------- \r\n  // render functions\r\n  // ------------------- \r\n\r\n  renderTableGroups() {\r\n    return this.props.room.table.map((group, index) => (\r\n      <RenderCards\r\n        key={group.id}\r\n        id={group.id}\r\n        cards={group.cards}\r\n        location='table'\r\n        onClick={this.props.onClick}\r\n        handleCardDrop={(location, e) => this.props.handleCardDrop(location, e)}\r\n        sendToServer={(action, content) => this.props.sendToServer(action, content)}\r\n      />\r\n    ))\r\n  }\r\n\r\n  render () {\r\n    return (\r\n      <div className=\"relative flex flex-col  sm:flex-row sm:flex-wrap items-start justify-center w-full h-full pt-4\">\r\n        {this.props.room.table && \r\n          this.renderTableGroups()\r\n        }\r\n        {/* Show if user is dragging, is current player, has grabbed card, card comes from player */}\r\n        {this.props.userIsDragging &&\r\n          (this.props.user.username === this.props.room.currentPlayer) &&\r\n          (this.props.room.currentPlayerHasGrabbedCard) &&\r\n          <div className=\"absolute flex items-stretch top-0 left-0 w-full h-full pt-2 px-2\">\r\n            <Container\r\n              style={{width: '100%'}}\r\n              groupName='droppable'\r\n              animationDuration={0}\r\n              behaviour='drop-zone'\r\n              onDrop={(e) => {this.props.handleCardDrop('table', e)}}\r\n            >\r\n              <div className=\"inline-flex items-end justify-center border-2 border-dashed border-gray-400 rounded-lg w-full h-full z-0 p-2 text-gray-400 font-semibold text-xl\">Drop to table</div>\r\n            </Container>\r\n          </div>\r\n        }\r\n      </div>\r\n    )\r\n  } \r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    endpoint: state.endpoint,\r\n    gameId: state.gameId,\r\n    room: state.room,\r\n    connectedUsers: state.connectedUsers,\r\n    user: state.user,\r\n    isTableActive: state.isTableActive,\r\n    userIsDragging: state.userIsDragging,\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps)(Table)\r\n","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport RenderCards from './RenderCards'\r\n\r\nclass RenderPlayers extends Component {\r\n  render() {\r\n    const isCurrentPlayer = (playerUsername) => {\r\n      return this.props.room.currentPlayer === playerUsername\r\n    }\r\n\r\n    return this.props.room.players.map(player => {\r\n      const isPlayerOnline = player.isOnline\r\n      const onlineClasses = \"inline-flex flex-col items-start mx-2 sm:mx-4 my-2\"\r\n      const offlineClasses = `${onlineClasses} opacity-75`\r\n      const styles = isPlayerOnline ? onlineClasses : offlineClasses\r\n\r\n      const showAllCards = this.props.room.currentRoundEnded ? 'showAllCards' : null\r\n\r\n      let userTotalPoints = 0\r\n\r\n      for (let i in player.hand) {\r\n        const thisValue = player.hand[i].value\r\n\r\n        if (thisValue === 'A' || thisValue === 'K' || thisValue === 'Q' || thisValue === 'J') {\r\n          userTotalPoints += 10\r\n        } else if (Number(thisValue) === 2) {\r\n          userTotalPoints += 15\r\n        } else {\r\n          userTotalPoints += parseInt(thisValue)\r\n        }\r\n\r\n      }\r\n\r\n      if (player.name === this.props.user.username) { return false }\r\n\r\n      return (\r\n        <div className={styles} key={player.id}>\r\n          <span className='mb-1'>\r\n            {isCurrentPlayer(player.name) &&\r\n              <strong>\r\n                {player.name}\r\n              </strong>\r\n            }\r\n            {!isCurrentPlayer(player.name) && player.name}\r\n            {this.props.room.currentRoundEnded &&\r\n              <span className='font-bold ml-3 p-1 bg-gray-400 rounded'>\r\n                {userTotalPoints}\r\n              </span>\r\n            }\r\n          </span>\r\n          <span className={`inline-flex showOnlyTwoCards ${showAllCards}`}>\r\n            <RenderCards key={player.name} cards={player.hand} location='other players' />\r\n          </span>\r\n        </div>\r\n      )\r\n    })\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    room: state.room,\r\n    user: state.user\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps)(RenderPlayers)\r\n","// import packages\r\nimport React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { withRouter } from 'react-router-dom'\r\nimport io from 'socket.io-client'\r\n\r\nimport RenderCards from './RenderCards'\r\nimport { Container } from 'react-smooth-dnd'\r\n\r\nimport Button from './Button'\r\nimport Player from './Player'\r\nimport Table from './Table'\r\nimport RenderPlayers from './RenderPlayers'\r\n\r\n// Making the App component\r\nclass App extends Component {\r\n  constructor () {\r\n    super()\r\n\r\n    this.handleStartGameButton = this.handleStartGameButton.bind(this)\r\n    this.handleCardClick = this.handleCardClick.bind(this)\r\n    this.handleTableUpdate = this.handleTableUpdate.bind(this)\r\n    this.handlePauseButton = this.handlePauseButton.bind(this)\r\n    this.handleCardDrop = this.handleCardDrop.bind(this)\r\n\r\n    this.renderHeader = this.renderHeader.bind(this)\r\n    this.renderDiscardPile = this.renderDiscardPile.bind(this)\r\n    this.renderStock = this.renderStock.bind(this)\r\n    this.renderMain = this.renderMain.bind(this)\r\n    this.renderPlayer = this.renderPlayer.bind(this)\r\n    this.renderPauseButton = this.renderPauseButton.bind(this)\r\n    this.renderBuyRequest = this.renderBuyRequest.bind(this)\r\n    this.handleIWantItBeforeButton = this.handleIWantItBeforeButton.bind(this)\r\n\r\n    this.cooldown = 0;\r\n    this.startCooldown = this.startCooldown.bind(this);\r\n    this.cooldownCountDown = this.cooldownCountDown.bind(this);\r\n  }\r\n\r\n  // ------------------- \r\n  // user actions\r\n  // ------------------- \r\n\r\n  handleStartGameButton() {\r\n    this.socket.emit('start game', this.props.room.name, this.props.user.username)\r\n  }\r\n\r\n  handleCardClick(cardType) {\r\n    // stop if player is not current player\r\n    if (this.props.user.username !== this.props.room.currentPlayer) { return false }\r\n\r\n    if (cardType === 'stock') {\r\n      if (this.props.room.currentPlayerHasGrabbedCard) { return false }\r\n\r\n      this.socket.emit('card from stock to user', this.props.room.name, this.props.user.username)\r\n    }\r\n  }\r\n\r\n  handleTableUpdate() {\r\n    this.socket.emit('update table', this.props.room.gameId, this.props.room.table)\r\n  }\r\n\r\n  sendToServer(action, content) {\r\n    this.socket.emit(action, this.props.room.gameId, this.props.user.username, content)\r\n  }\r\n\r\n  handlePauseButton() {\r\n    this.socket.emit('player pauses', this.props.room.name, this.props.user.username)\r\n  }\r\n\r\n  handleBuying() {\r\n    this.socket.emit('player buys', this.props.room.name, this.props.user.username)\r\n  }\r\n\r\n  handleAlsoWants() { \r\n    console.log('click also wants')\r\n    this.socket.emit('player also wants', this.props.room.name, this.props.user.username)\r\n  }\r\n\r\n  handleIWantItBeforeButton() {\r\n    console.log('no, me!')\r\n    this.socket.emit('i want it before', this.props.room.gameId, this.props.user.username)\r\n  }\r\n\r\n  handleNewRoundButton() {\r\n    console.log('new round!!')\r\n    this.socket.emit('start new round', this.props.room.name)\r\n  }\r\n\r\n  handleCardDrop(cardLocation, e) {\r\n    const removedIndex = e?.removedIndex\r\n    const addedIndex = e?.addedIndex\r\n\r\n    // stop if not removed or added to this group\r\n    if (removedIndex === null && addedIndex === null) { return false }\r\n\r\n    // if card removed from and NOT added\r\n    if (removedIndex !== null && addedIndex === null) {\r\n      // save drop info\r\n      this.props.dispatch({\r\n        type: \"MOVEMENT_INFO\",\r\n        fromPosition: removedIndex\r\n      }) \r\n    }\r\n\r\n    // if card added to and NOT removed\r\n    if (addedIndex !== null && removedIndex === null) {\r\n      // save drop info\r\n      this.props.dispatch({\r\n        type: \"MOVEMENT_INFO\",\r\n        to: cardLocation,\r\n        toPosition: addedIndex\r\n      }) \r\n    }\r\n\r\n    // if card removed and added (moved inside players hand)\r\n    if (removedIndex === addedIndex) return false\r\n\r\n    if (removedIndex !== null && addedIndex !== null) {\r\n      // save drop info\r\n      this.props.dispatch({\r\n        type: \"MOVEMENT_INFO\",\r\n        to: cardLocation,\r\n        fromPosition: removedIndex,\r\n        toPosition: addedIndex\r\n      }) \r\n    }\r\n\r\n    // this means FROM and TO are set, do DB things\r\n    if (this.props.cardMovement?.fromPosition >= 0 && this.props.cardMovement?.toPosition >= 0) {\r\n      \r\n      let card = {}\r\n      const playerIndex = this.props.room.players.findIndex(player => player.name === this.props.user.username)\r\n      const playerHand = this.props.room.players[playerIndex].hand\r\n      const newTable = this.props.room.table\r\n      \r\n      if (this.props.cardMovement?.from === 'player') {\r\n        card = playerHand[this.props.cardMovement?.fromPosition]\r\n        playerHand.splice(this.props.cardMovement.fromPosition, 1)\r\n      } else {\r\n        const groupId = this.props.room.table.findIndex(group => group.id === this.props.cardMovement?.from)\r\n        \r\n        card = newTable[groupId].cards[this.props.cardMovement?.fromPosition]\r\n        newTable[groupId].cards.splice(this.props.cardMovement?.fromPosition, 1)\r\n        \r\n        if (newTable[groupId].cards.length === 0) {\r\n          newTable.splice(groupId, 1)\r\n        }\r\n      }\r\n      \r\n      if (this.props.cardMovement?.to === 'player') {\r\n        playerHand.splice(this.props.cardMovement.toPosition, 0, card)\r\n        \r\n        this.props.dispatch({\r\n          type: \"UPDATE_USER_HAND\",\r\n          value: playerHand\r\n        }) \r\n      } else if (this.props.cardMovement?.to === 'discard') {\r\n        const newDiscard = this.props.room.discard\r\n        newDiscard.push(card)\r\n        \r\n        this.props.dispatch({\r\n          type: \"UPDATE_DISCARD\",\r\n          value: newDiscard\r\n        }) \r\n      } else if (this.props.cardMovement?.to === 'table') {\r\n        const newGroup = {\r\n          cards: [card]\r\n        }\r\n    \r\n        newTable.push(newGroup)\r\n        \r\n        this.props.dispatch({\r\n          type: \"UPDATE_TABLE\",\r\n          value: newTable\r\n        }) \r\n      } else {\r\n        const groupId = this.props.room.table.findIndex(group => group.id === this.props.cardMovement?.to)\r\n        \r\n        newTable[groupId].cards.splice(this.props.cardMovement?.toPosition, 0, card)\r\n        \r\n        this.props.dispatch({\r\n          type: \"UPDATE_TABLE\",\r\n          value: newTable\r\n        }) \r\n      }\r\n      \r\n      \r\n      \r\n      \r\n      this.socket.emit('card movement', this.props.room.name, this.props.user.username, this.props.cardMovement)\r\n      \r\n\r\n\r\n\r\n\r\n      // remove previous drop info\r\n      this.props.dispatch({\r\n        type: \"CLEAR_MOVEMENT_INFO\"\r\n      }) \r\n    }\r\n  }\r\n\r\n  // ------------------- \r\n  // render functions\r\n  // ------------------- \r\n\r\n  // render header\r\n  renderHeader() {\r\n    if (!this.props.room.gameHasStarted) { return false }\r\n    return (\r\n      <div className=\"relative z-20 inline-flex items-end justify-between border-b border-solid border-gray-300\">\r\n        <div className=\"inline-flex flex-grow\">\r\n          <RenderPlayers players={this.props.room.players} />\r\n        </div>\r\n        <div className=\"inline-flex justify-center py-2\">\r\n          {this.props.room.currentRoundEnded &&\r\n            <div className=\"inline-flex self-center\">\r\n              <Button\r\n                classes='mx-2'\r\n                onClick={(e) => {this.handleNewRoundButton(e)}}\r\n              >\r\n                Nueva ronda!\r\n              </Button>\r\n            </div>\r\n          }\r\n        </div>\r\n        {this.renderBuyRequest()}\r\n      </div>\r\n    )\r\n  }\r\n\r\n  // render discard pile\r\n  renderDiscardPile() {\r\n    let hasHiddenCards = this.props.room.hiddenCardsWereBought ? 'noHiddenCards' : 'hasHiddenCards'\r\n    const willAcceptDrop = this.props.room.currentPlayer === this.props.user.username && this.props.room.currentPlayerHasGrabbedCard\r\n\r\n    const classes = `inline-flex ${hasHiddenCards} rounded border-2 border-dashed border-gray-400`\r\n\r\n    return (\r\n      <Container\r\n        style={{\r\n          position: 'absolute',\r\n          bottom: 0,\r\n          left: 0,\r\n          marginLeft: '1rem'\r\n        }}\r\n        groupName={(willAcceptDrop && 'droppable') || ''}\r\n        animationDuration={0}\r\n        behaviour='drop-zone'\r\n        onDrop={(e) => {this.handleCardDrop('discard', e)}}\r\n      >\r\n        <div\r\n          className={classes}\r\n          style={{minWidth: '4.3rem', minHeight: '5rem'}}\r\n        >\r\n          <RenderCards cards={this.props.room.discard} location='discard' />\r\n        </div>\r\n      </Container>\r\n    )\r\n  }\r\n\r\n  // render stock\r\n  renderStock() {\r\n    const disableStyles = this.props.room.currentPlayer === this.props.user.username && this.props.turnCooldown > 0 ? 'opacity-25' : null\r\n    return (\r\n      <div className='absolute bottom-0 left-0 ml-32 mb-2 inline-flex items-center justify-center'>\r\n        {this.props.room.currentPlayer === this.props.user.username && this.props.turnCooldown > 0 && \r\n          <div className='absolute top-0 left-0 w-12 md:w-16 h-full mx-2 inline-flex items-center justify-center z-40 font-bold text-2xl'>\r\n            {this.props.turnCooldown}\r\n          </div>\r\n        }\r\n        <div className={disableStyles}>\r\n          <RenderCards\r\n            cards={this.props.room.stock}\r\n            location='stock'\r\n            onClick={this.handleCardClick}\r\n          />\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  renderBuyRequest() {\r\n    const playerWantsToBuy = this.props.playerWantsToBuy\r\n\r\n    if (this.props.room.prevPlayer === this.props.user.username || this.props.playerWantsToBuy === this.props.user.username) { return false }\r\n\r\n    if (!!playerWantsToBuy) {\r\n      return(\r\n        <div\r\n          className='absolute bottom-0 right-0 rounded mr-2 p-2 text-center bg-red-400'\r\n          style={{transform: 'translateY(110%)'}}\r\n        >\r\n          {playerWantsToBuy} wants to buy!\r\n          <div className='flex mt-2'>\r\n            <Button\r\n              classes=\"mr-1\"\r\n            >\r\n              OK\r\n            </Button>\r\n            <Button\r\n              classes=\"ml-1\"\r\n              onClick={(e) => {this.handleIWantItBeforeButton(e)}}\r\n            >\r\n              No, me!\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      )\r\n    }\r\n\r\n    return false\r\n  }\r\n\r\n  // render player\r\n  renderMain() {\r\n    return (\r\n      <div className=\"relative inline-flex flex-col items-center justify-center flex-grow flex-shrink z-20\">\r\n        {!!this.props.room.gameHasStarted &&\r\n          <Table \r\n            handleTableUpdate={(e) => this.handleTableUpdate(e)}\r\n            handleCardDrop={(location, e) => this.handleCardDrop(location, e)}\r\n            sendToServer={(action, content) => this.sendToServer(action, content)}\r\n          />\r\n        }\r\n        {!!this.props.room.gameHasStarted && this.renderDiscardPile()}\r\n        {!!this.props.room.gameHasStarted && this.renderStock()}\r\n        {!this.props.room.gameHasStarted &&\r\n          <div> \r\n            <p>Jugadores:</p>\r\n            <ul>\r\n              {this.props.room.connectedUsers.map(user => (\r\n                <li key={`userList-${user.id}`}>\r\n                {user.name}\r\n                </li>\r\n              ))}\r\n            </ul>\r\n            <Button\r\n              classes=\"m-2\"\r\n              onClick={(e) => this.handleStartGameButton(e)}\r\n            >\r\n              Start game!\r\n            </Button>\r\n          </div>\r\n        }\r\n      </div>\r\n    )\r\n  }\r\n\r\n  cancelPause() {\r\n    this.socket.emit('player cancels pause', this.props.room.name)\r\n  }\r\n\r\n  startCooldown() {\r\n    this.props.dispatch({\r\n      type: \"UPDATE_COOLDOWN_TIME\",\r\n      turnCooldown: this.props.room.cooldownTime\r\n    })\r\n    this.cooldown = setInterval(this.cooldownCountDown, 1000)\r\n  }\r\n  \r\n  cooldownCountDown() {\r\n    let newCooldownTime = this.props.turnCooldown - 1\r\n    this.props.dispatch({\r\n      type: \"UPDATE_COOLDOWN_TIME\",\r\n      turnCooldown: newCooldownTime\r\n    })\r\n    \r\n    // Check if we're at zero.\r\n    if (this.props.turnCooldown === 0) { \r\n      clearInterval(this.cooldown)\r\n    }\r\n  }\r\n\r\n  getNextPlayer(players, currentPlayer) {\r\n    for (let i in players) {\r\n      if (players[i].name === currentPlayer) {\r\n        if ((Number(i) + 1) > (players.length - 1)) {\r\n          return 0\r\n        } else {\r\n          return Number(i) + 1\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  isThisUserTurn = () => this.props.user.username === this.props.room.currentPlayer\r\n\r\n  renderPausePopup() {\r\n    const isPrevPlayerThisPlayer = this.props.room.prevPlayer === this.props.user.username\r\n    const hasCurrentPlayerGrabbedCard = this.props.room.currentPlayerHasGrabbedCard\r\n    const isBuyingDisabled = isPrevPlayerThisPlayer || hasCurrentPlayerGrabbedCard\r\n\r\n    const thisUserPaused = this.props.room.playerPausedGame === this.props.user.username\r\n\r\n    const userHasPriority = () => {\r\n      const thisUserPriorityIndex = this.props.room.playersByPriority.findIndex(player => player === this.props.user.username)\r\n      const currentPlayerPriorityIndex = this.props.room.playersByPriority.findIndex(player => player === this.props.room.currentPlayer)\r\n      const playerPausedPriorityIndex = this.props.room.playersByPriority.findIndex(player => player === this.props.room.playerPausedGame)\r\n\r\n      return thisUserPriorityIndex === currentPlayerPriorityIndex || thisUserPriorityIndex < playerPausedPriorityIndex\r\n    }\r\n\r\n    return (\r\n      <div className='absolute right-0 mb-2 mr-2 w-64 rounded p-2 bg-blue-400 text-white z-50' style={{bottom: '100%'}}>\r\n        {thisUserPaused && !isBuyingDisabled &&\r\n          <div className='flex flex-col items-center'>\r\n            {this.isThisUserTurn() &&\r\n              <div className='text-center'>Es tu turno, Quieres comprar?</div>\r\n            }\r\n            {!this.isThisUserTurn() &&\r\n              <div className='text-center'>Quieres comprar?</div>\r\n            }\r\n            <Button\r\n              classes='my-2 w-full'\r\n              onClick={(e) => {this.handleBuying(e)}}\r\n            >\r\n              Siiiiiii!!\r\n            </Button>\r\n            <Button\r\n              classes='w-full'\r\n              onClick={(e) => {this.cancelPause(e)}}\r\n            >\r\n              Al final no\r\n            </Button>\r\n            {!userHasPriority()  &&\r\n              <div className='text-xs mt-1'>\r\n                Slo podrs comprar si estas personas no quieren:\r\n                <strong>\r\n                  {this.props.room.playersByPriority.map((player, index) => {\r\n                    const thisUserPriorityIndex = this.props.room.playersByPriority.findIndex(player => player === this.props.user.username)\r\n\r\n                    if (index < thisUserPriorityIndex) {\r\n                      if (index === 0) {\r\n                        return ` ${player}`\r\n                      } else {\r\n                        return `, ${player}`\r\n                      }\r\n                    }\r\n                  })}\r\n                </strong>\r\n              </div>\r\n            }\r\n          </div>\r\n        }\r\n        {!thisUserPaused &&\r\n          <div className='flex flex-col items-center'>\r\n            <div className='text-center'>\r\n              <strong>{this.props.room.playerPausedGame}</strong> se lo est pensando\r\n            </div>\r\n            {userHasPriority() && !isBuyingDisabled &&\r\n              <div>\r\n                <Button\r\n                  classes='my-2 w-full'\r\n                  onClick={(e) => {this.handlePauseButton(e)}}\r\n                >\r\n                  No, yo compro!\r\n                </Button>\r\n                {/* <Button\r\n                  classes='mx-2 w-full'\r\n                  onClick={(e) => {this.handleOk(e)}}\r\n                >\r\n                  Hmmm... vale.\r\n                </Button> */}\r\n              </div>\r\n            }\r\n            {!userHasPriority() && !isBuyingDisabled &&\r\n              <div>\r\n                <Button\r\n                  classes='mx-2 my-2 w-full'\r\n                  onClick={(e) => {this.handleAlsoWants(e)}}\r\n                >\r\n                  Yo tambin quiero!\r\n                </Button>\r\n              </div>\r\n            }\r\n            {!userHasPriority() && !isBuyingDisabled &&\r\n              <div className='text-xs mt-1'>\r\n                Slo podrs comprar si estas personas al final no compran:\r\n                <strong>\r\n                  {this.props.room.playersByPriority.map((player, index) => {\r\n                    const thisUserPriorityIndex = this.props.room.playersByPriority.findIndex(player => player === this.props.user.username)\r\n\r\n                    if (index < thisUserPriorityIndex) {\r\n                      if (index === 0) {\r\n                        return ` ${player}`\r\n                      } else {\r\n                        return `, ${player}`\r\n                      }\r\n                    }\r\n                  })}\r\n                </strong>\r\n              </div>\r\n            }\r\n          </div>\r\n        }\r\n      </div>\r\n    )\r\n  }\r\n\r\n  renderPauseButton() {\r\n    const isPrevPlayerThisPlayer = this.props.room.prevPlayer === this.props.user.username\r\n    const hasCurrentPlayerGrabbedCard = this.props.room.currentPlayerHasGrabbedCard\r\n    const isPauseButtonDisabled = isPrevPlayerThisPlayer || hasCurrentPlayerGrabbedCard\r\n\r\n    const playerPausedGame = this.props.room.playerPausedGame\r\n    const isGamePaused = !!playerPausedGame\r\n\r\n    return (\r\n      <div className=\"absolute right-0 top-0\">\r\n        {!isGamePaused &&\r\n          <Button\r\n            disabled={isPauseButtonDisabled}\r\n            classes='mx-2'\r\n            onClick={(e) => {this.handlePauseButton(e)}}\r\n          >\r\n            Un momento!\r\n          </Button>\r\n        }\r\n        {isGamePaused && this.renderPausePopup()}\r\n        {isGamePaused &&\r\n          <Button\r\n            disabled={true}\r\n            classes='mx-2'\r\n            onClick={(e) => {this.handlePauseButton(e)}}\r\n          >\r\n            {this.props.room.remainingTime}\r\n          </Button>\r\n        }\r\n      </div>  \r\n    )\r\n  }\r\n\r\n  // render player\r\n  renderPlayer() {\r\n    if (!this.props.room.gameHasStarted) { return false }\r\n    return (\r\n      <div className=\"relative inline-flex items-center z-30\">\r\n        <Player\r\n          key={this.props.user.username}\r\n          user={this.props.user}\r\n          room={this.props.room}\r\n          currentPlayer={this.props.room.currentPlayer}\r\n          handlePauseButton={e => this.handlePauseButton(e)}\r\n          handleCardDrop={(location, e) => this.handleCardDrop(location, e)}\r\n          sendToServer={(action, content) => this.sendToServer(action, content)}\r\n        />\r\n        {this.renderPauseButton()}\r\n      </div>\r\n    )\r\n  }\r\n\r\n  // ------------------- \r\n  // life cycle functions\r\n  // ------------------- \r\n\r\n  componentDidMount() {\r\n    // set gameID from path\r\n    const gamePath = window.location.pathname.split('/')[2]\r\n    this.props.dispatch({ type: \"SET_GAMEID\", gameId: gamePath })\r\n    localStorage.setItem('gameId', gamePath)\r\n\r\n    // TODO: Fix: if redirect happens, it register a nameless user on the room\r\n    // get username from local storage\r\n    const username = !!localStorage.getItem('username') ? localStorage.getItem('username') : ''\r\n    // redirect to welcome if username is not set\r\n    if (!username.length > 0) {\r\n      this.props.history.push('/')\r\n    } else {\r\n      // Set username in db if there is one\r\n      this.props.dispatch({ type: \"SET_USERNAME\", username: username })\r\n    }\r\n\r\n    // ------------------- \r\n    // socket functions\r\n    // ------------------- \r\n\r\n    // socket connect\r\n    this.socket = io.connect(this.props.endpoint, { query: 'gameId='+gamePath })\r\n\r\n    // socket login\r\n    this.socket.emit('login', gamePath, username)\r\n\r\n    // receive user info\r\n    this.socket.on('updateUserInfo', (userInfo) => {\r\n      if (this.props.user.username === userInfo.username) {\r\n        this.props.dispatch({\r\n          type: \"UPDATE_USER_INFO\",\r\n          username: userInfo.username,\r\n          id: userInfo.id,\r\n          isOnline: userInfo.isOnline,\r\n          hand: userInfo.hand\r\n        })\r\n      }\r\n    })\r\n\r\n    // receive game info\r\n    this.socket.on('updateGame', (room) => {\r\n      let shouldStartCooldown = false\r\n      if (this.props.room.rounds.length > 0) {\r\n        const currentTurn = this.props.room.rounds[this.props.room.rounds.length - 1].currentTurn\r\n        const newTurn = room.rounds[room.rounds.length - 1].currentTurn\r\n\r\n        if (currentTurn < newTurn) {\r\n          shouldStartCooldown = true\r\n        }\r\n      }\r\n\r\n      this.props.dispatch({ type: \"UPDATE_GAME\", value: room })\r\n\r\n      if (shouldStartCooldown && this.props.room.currentPlayer === this.props.user.username) {\r\n        this.startCooldown()\r\n      }\r\n    })\r\n\r\n    // receive buy request\r\n    this.socket.on('player wants to buy', (username) => {\r\n      this.props.dispatch({ type: \"PLAYER_WANTS_TO_BUY\", value: username })\r\n    })\r\n  }\r\n\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"w-screen h-screen overflow-hidden bg-gray-100 flex flex-col justify-stretch\">\r\n        {this.renderHeader()}\r\n        {this.renderMain()}\r\n        {this.renderPlayer()}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    endpoint: state.endpoint,\r\n    gameId: state.gameId,\r\n    room: state.room,\r\n    connectedUsers: state.connectedUsers,\r\n    user: state.user,\r\n    isTableActive: state.isTableActive,\r\n    playerWantsToBuy: state.playerWantsToBuy,\r\n    cardMovement: state.cardMovement,\r\n    turnCooldown: state.turnCooldown\r\n }\r\n}\r\n\r\nexport default connect(mapStateToProps)(withRouter(App))\r\n","import React, { Component } from 'react'\r\n\r\n// Making the App component\r\nclass Input extends Component {\r\n  render() {\r\n    return (\r\n      <input\r\n        className=\"border border-solid border-teal-400 rounded py-1 px-2\"\r\n        id={this.props.id}\r\n        type={this.props.text}\r\n        placeholder={this.props.placeholder}\r\n        value={this.props.value}\r\n        onChange={this.props.onChange}\r\n      />\r\n    )\r\n  }\r\n}\r\n\r\nexport default Input\r\n","import React, { Component } from 'react'\r\nimport { withRouter } from 'react-router-dom'\r\n\r\nimport Input from './Input.js'\r\nimport Button from './Button.js'\r\n\r\n// Making the App component\r\nclass Welcome extends Component {\r\n  constructor() {\r\n    super()\r\n   \r\n    this.state = {\r\n      username: '',\r\n      gameId: ''\r\n    } \r\n  }\r\n\r\n  componentDidMount() {\r\n    const username = !!localStorage.getItem('username') ? localStorage.getItem('username') : ''\r\n    const gameId = !!localStorage.getItem('gameId') ? localStorage.getItem('gameId') : ''\r\n    this.setState({\r\n      'username': username,\r\n      'gameId': gameId\r\n    })\r\n  }\r\n\r\n  render() {\r\n    const handleGoButton = (e) => {\r\n      e.preventDefault()\r\n      const gameId = localStorage.getItem('gameId')\r\n\r\n      this.props.history.push(`/game/${gameId}`)\r\n    }\r\n\r\n    const handleUsernameInputChange = () => {\r\n      const username = document.getElementById('welcome__input--username').value\r\n      localStorage.setItem('username', username)\r\n      this.setState({'username': username})\r\n    }\r\n\r\n    const handleGameIdInputChange = () => {\r\n      const gameId = document.getElementById('welcome__input--gameId').value\r\n      localStorage.setItem('gameId', gameId)\r\n      this.setState({'gameId': gameId})\r\n    }\r\n\r\n    console.log('state.username:', this.state.username)\r\n\r\n    return (\r\n      <div style={{ textAlign: \"center\" }}>\r\n        <h2>Welcome!</h2>\r\n        <form action=\"submit\">\r\n          <p>What's your name?</p>\r\n          <Input\r\n            type=\"text\"\r\n            id=\"welcome__input--username\"\r\n            placeholder=\"Enter name\"\r\n            value={this.state.username}\r\n            onChange={() => handleUsernameInputChange()}\r\n          />\r\n          <p>Name a game:</p>\r\n          <Input\r\n            type=\"text\"\r\n            id=\"welcome__input--gameId\"\r\n            placeholder=\"Enter game ID\"\r\n            value={this.state.gameId}\r\n            onChange={() => handleGameIdInputChange()}\r\n          />\r\n          <p>\r\n            <Button\r\n              classes=\"m-2\"\r\n              onClick={(e) => handleGoButton(e)}\r\n            >\r\n              Go!\r\n            </Button>\r\n          </p>\r\n        </form>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default withRouter(Welcome)\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom'\r\nimport {\r\n  BrowserRouter as Router,\r\n  Switch,\r\n  Route\r\n} from \"react-router-dom\"\r\n\r\n// redux for state\r\nimport { createStore } from 'redux'\r\nimport { Provider } from 'react-redux';\r\n\r\n// CSS & tailwind\r\nimport './assets/main.css'\r\n\r\n// service workers (came with create-react-app)\r\nimport * as serviceWorker from './serviceWorker'\r\n\r\n// my components\r\nimport App from './components/App'\r\nimport Welcome from './components/Welcome'\r\n\r\nconst endpoint = `//telefunken.pimenta.co/game`\r\n// const endpoint = `//localhost:4001/game`\r\n\r\n// define initial state \r\nconst initialState = {\r\n  endpoint: endpoint,\r\n  room: {\r\n    name: '',\r\n    deck: [], // initial cards\r\n    stock: [], // remaining cards for play\r\n    discard: [],\r\n    totalRounds: 6,\r\n    currentRound: 1,\r\n    rounds: [],\r\n    direction: '', // clockwise/counterclockwise\r\n    startingPlayer: '',\r\n    currentPlayer: '',\r\n    table: [], // stores array of cards on table\r\n    connectedUsers: [],\r\n    players: [] // keeps track of players and events\r\n  },\r\n  user: {\r\n    username: ''\r\n  },\r\n  userIsDragging: false,\r\n  savedCard: 'none',\r\n  fromGroup: 'none',\r\n  toGroup: 'none',\r\n  minusOne: 0,\r\n  playerWantsToBuy: '',\r\n  timer: 0\r\n}\r\n\r\n// define reducers\r\nfunction reducer(state = initialState, action) {\r\n  const newState = {...state}\r\n\r\n  switch(action.type) {\r\n    case 'SET_GAMEID':\r\n      return {\r\n        ...state,\r\n        gameId: action.gameId\r\n      }\r\n\r\n    case 'SET_USERNAME':\r\n      return {\r\n        ...state,\r\n        user: {\r\n          ...state.user,\r\n          username: action.username\r\n        }\r\n      }\r\n\r\n    case 'UPDATE_GAME':\r\n      return {\r\n        ...state,\r\n        room: action.value,\r\n      }\r\n\r\n    case 'UPDATE_USER_INFO':\r\n      return {\r\n        ...state,\r\n        room: { \r\n          ...state.room,\r\n          players: state.room.players.map(player => player.name === action.username ?\r\n              {...player, hand: action.hand} : player\r\n            )\r\n        }\r\n      }\r\n    \r\n    case 'USER_IS_DRAGGING':\r\n      return {\r\n        ...state,\r\n        userIsDragging: true\r\n      }\r\n\r\n    case 'USER_IS_NOT_DRAGGING':\r\n      return {\r\n        ...state,\r\n        userIsDragging: false\r\n      }\r\n\r\n    case 'MOVEMENT_INFO':\r\n      return {\r\n        ...state,\r\n        cardMovement: {\r\n          ...state.cardMovement,\r\n          from: action.from ?? state.cardMovement?.from,\r\n          to: action.to ?? state.cardMovement?.to,\r\n          fromPosition: action.fromPosition ?? state.cardMovement?.fromPosition,\r\n          toPosition: action.toPosition ?? state.cardMovement?.toPosition\r\n        }\r\n      }\r\n\r\n    case 'CLEAR_MOVEMENT_INFO':\r\n      return {\r\n        ...state,\r\n        cardMovement: null\r\n      }\r\n\r\n    case 'UPDATE_DISCARD':\r\n      newState.room.discard = action.value\r\n\r\n      return newState\r\n\r\n    case 'UPDATE_TABLE':\r\n      newState.room.table = action.value\r\n\r\n      return newState\r\n\r\n    case 'UPDATE_COOLDOWN_TIME':\r\n      return {\r\n        ...state,\r\n        turnCooldown: action.turnCooldown\r\n      }\r\n\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\n// create store & enable redux dev tools\r\nconst store = createStore(reducer, window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__());\r\n\r\n// root component\r\nconst Root = () => {\r\n  return (\r\n    <Provider store={store}>\r\n      <Router>\r\n        <Switch>\r\n          <Route path=\"/game/:gameId\">\r\n            <App />\r\n          </Route>\r\n          <Route path=\"/\">\r\n            <Welcome />\r\n          </Route>\r\n        </Switch>\r\n      </Router>\r\n    </Provider>\r\n  )\r\n}\r\n\r\nReactDOM.render(<Root />, document.getElementById('root'))\r\n\r\nserviceWorker.unregister()\r\n"],"sourceRoot":""}